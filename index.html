<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPS Chat System</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/chat.css">
    <link rel="stylesheet" href="styles/responsive.css">
    <link rel="stylesheet" href="styles/emoji-picker.css">
    <link rel="stylesheet" href="styles/file-upload.css">
    <link rel="stylesheet" href="styles/sidebar.css">
    <link rel="stylesheet" href="styles/admin.css">
    <link rel="stylesheet" href="styles/responsive.css">
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="styles/ips-settings.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Main Application Container -->
    <div class="app-container">
        <!-- Top Navigation -->
        <nav class="top-navigation">
            <div class="top-nav">
                <div class="nav-brand">
                    <i class="fas fa-comments"></i>
                    IPS Chat
                </div>
                
                <div class="nav-center">
                    <div class="active-users-counter" id="activeUsersCounter">
                        <i class="fas fa-users"></i>
                        <span class="users-count">0</span>
                        <span class="users-text">online</span>
                        <div class="users-dropdown" id="usersDropdown">
                            <div class="dropdown-header">
                                <h4>Aktywni użytkownicy</h4>
                            </div>
                            <div class="users-list" id="usersList">
                                <!-- Lista użytkowników będzie dodawana dynamicznie -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="nav-user">
                    <div class="user-info">
                        <span class="user-name">Użytkownik</span>
                        <span class="user-status">Online</span>
                    </div>
                    <div class="user-avatar">U</div>
                </div>
                
                <button class="hamburger-menu" aria-label="Toggle menu">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
            </div>
            
            <div class="dropdown-menu" id="dropdownMenu">
                <div class="dropdown-header">
                    <h3>Menu</h3>
                    <button class="dropdown-close" aria-label="Close menu">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <nav class="dropdown-nav">
                    <a href="#" class="nav-item active" data-action="home">
                        <i class="fas fa-home"></i>
                        <span>Główna</span>
                    </a>
                    <a href="#" class="nav-item" data-action="rooms">
                        <i class="fas fa-door-open"></i>
                        <span>Pokoje</span>
                    </a>
                    <a href="#" class="nav-item" data-action="users">
                        <i class="fas fa-users"></i>
                        <span>Użytkownicy</span>
                    </a>
                    <a href="#" class="nav-item" data-action="settings">
                        <i class="fas fa-cog"></i>
                        <span>Ustawienia</span>
                    </a>
                    <a href="#" class="nav-item" data-action="advanced-settings">
                        <i class="fas fa-sliders-h"></i>
                        <span>Zaawansowane</span>
                    </a>
                    <a href="#" class="nav-item" data-action="admin">
                        <i class="fas fa-shield-alt"></i>
                        <span>Panel Admin</span>
                    </a>
                    <hr class="dropdown-divider">
                    <a href="#" class="nav-item" data-action="profile">
                        <i class="fas fa-user"></i>
                        <span>Profil</span>
                    </a>
                    <a href="#" class="nav-item" data-action="logout">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Wyloguj</span>
                    </a>
                </nav>
            </div>
        </nav>
        
        <!-- Content Wrapper -->
        <div class="content-wrapper">
            <!-- Sidebar -->
            <aside class="sidebar">
            <div class="sidebar-header">
                <h3>Pokoje</h3>
                <button class="add-room-btn" title="Dodaj pokój">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="room-tabs" id="room-tabs">
                <div class="tab active" data-room="main">
                    <i class="fas fa-hashtag"></i>
                    <span>Główny</span>
                    <span class="unread-count" style="display: none;">0</span>
                </div>
            </div>
            
            <!-- Top Users Section -->
            <div class="top-users-section">
                <div class="top-users-header">
                    <i class="fas fa-trophy"></i>
                    <span>Top Users</span>
                </div>
                
                <div class="statistics">
                    <div class="stat-item">
                        <span>Messages today</span>
                        <span class="stat-value">1,543</span>
                    </div>
                    <div class="stat-item">
                        <span>Total messages</span>
                        <span class="stat-value">45,892</span>
                    </div>
                    <div class="stat-item">
                        <span>This month</span>
                        <span class="stat-value">12,345</span>
                    </div>
                    <div class="stat-item">
                        <span>Active users</span>
                        <span class="stat-value">0</span>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="online-users">
                    <span class="online-count">
                        <i class="fas fa-circle online-indicator"></i>
                        <span id="online-count">0</span> online
                    </span>
                </div>
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="main-content">
            <div id="chat-container" class="chat-container">
        <!-- Header chatu -->
        <div class="chat-header">
            <div class="chat-title">
                <h3>Chat Główny</h3>
                <div class="online-users">
                    <span class="online-count">
                        <i class="fas fa-users"></i>
                        <span id="online-count">0</span> online
                    </span>
                    <div class="users-dropdown" id="users-dropdown">
                        <div class="users-list" id="users-list"></div>
                    </div>
                </div>
            </div>
            <div class="chat-controls">
                <button id="fullscreen-toggle" class="control-btn" title="Pełny ekran">
                    <i class="fas fa-expand"></i>
                </button>
                <button id="sound-toggle" class="control-btn" title="Włącz/wyłącz dźwięki">
                    <i class="fas fa-volume-up"></i>
                </button>
                <button id="minimize-chat" class="control-btn" title="Zwiń chat">
                    <i class="fas fa-minus"></i>
                </button>
                <button id="settings-btn" class="control-btn admin-only" title="Ustawienia">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </div>

        <!-- Ogłoszenie -->
        <div class="announcement" id="announcement" style="display: none;">
            <div class="announcement-content">
                <span class="announcement-text" id="announcement-text"></span>
                <button class="announcement-close" id="announcement-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>



        <!-- Obszar wiadomości -->
        <div class="messages-container" id="messages-container">
            <div class="messages-list" id="messages-list">
                <!-- Wiadomości będą dodawane dynamicznie -->
            </div>
            <div class="scroll-to-bottom" id="scroll-to-bottom" style="display: none;">
                <button>
                    <i class="fas fa-arrow-down"></i>
                    Nowe wiadomości
                </button>
            </div>
        </div>

        <!-- Obszar wprowadzania wiadomości -->
        <div class="input-area">
            <!-- Cytowanie -->
            <div class="quote-preview" id="quote-preview" style="display: none;">
                <div class="quote-content">
                    <span class="quote-author"></span>
                    <span class="quote-text"></span>
                </div>
                <button class="quote-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Podgląd pliku -->
            <div class="file-preview" id="file-preview" style="display: none;">
                <div class="file-info">
                    <img class="file-thumbnail" src="" alt="">
                    <span class="file-name"></span>
                    <span class="file-size"></span>
                </div>
                <button class="file-remove">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Pole tekstowe -->
            <div class="input-wrapper">
                <div class="input-controls">
                    <button id="emoji-btn" class="input-btn" title="Emotki">
                        <i class="fas fa-smile"></i>
                    </button>
                    <button id="file-btn" class="input-btn" title="Załącz plik">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    <input type="file" id="file-input" style="display: none;" multiple accept="image/*,video/*,audio/*">
                </div>
                
                <div class="textarea-wrapper">
                    <textarea 
                        id="message-input" 
                        placeholder="Napisz wiadomość..." 
                        rows="1"
                        maxlength="2000"
                    ></textarea>
                    <div class="mentions-dropdown" id="mentions-dropdown" style="display: none;">
                        <div class="mentions-list" id="mentions-list"></div>
                    </div>
                </div>

                <div class="voice-controls" style="display: none;">
                    <button id="voice-record" class="voice-btn">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <span class="voice-timer">00:00</span>
                    <button id="voice-stop" class="voice-btn">
                        <i class="fas fa-stop"></i>
                    </button>
                </div>

                <button id="send-btn" class="send-btn" title="Wyślij (Enter)">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>

            <div class="input-footer">
                <span class="char-counter">
                    <span id="char-count">0</span> / 2000
                </span>
                <span class="typing-indicator" id="typing-indicator" style="display: none;">
                    Ktoś pisze...
                </span>
            </div>
        </div>



        <!-- Statystyki -->
        <div class="chat-stats" id="chat-stats">
            <div class="stats-item">
                <span class="stats-label">Wpisów dziś:</span>
                <span class="stats-value" id="posts-today">0</span>
            </div>
            <div class="stats-item">
                <span class="stats-label">Wpisów ogółem:</span>
                <span class="stats-value" id="posts-total">0</span>
            </div>
        </div>
    </div>

    <!-- Panel administratora -->
    <div class="admin-panel" id="admin-panel" style="display: none;">
        <div class="admin-panel-overlay"></div>
        <div class="admin-panel-content">
            <div class="admin-panel-header">
                <h2>🛡️ Panel Administratora</h2>
                <button class="admin-close-btn">✕</button>
            </div>
            <div class="admin-panel-body">
                <div class="admin-sidebar">
                    <nav class="admin-nav">
                        <!-- Navigation will be populated by JavaScript -->
                    </nav>
                </div>
                <div class="admin-main">
                    <div class="admin-content">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modale -->
    <div class="modal-overlay" id="modal-overlay" style="display: none;">
        <div class="modal" id="modal">
            <div class="modal-header">
                <h3 class="modal-title"></h3>
                <button class="modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body"></div>
            <div class="modal-footer"></div>
        </div>
    </div>

    <!-- Emoji picker -->
    <div class="emoji-picker" id="emoji-picker" style="display: none;">
        <div class="emoji-categories">
            <button class="emoji-category active" data-category="smileys">😀</button>
            <button class="emoji-category" data-category="people">👤</button>
            <button class="emoji-category" data-category="nature">🌿</button>
            <button class="emoji-category" data-category="food">🍕</button>
            <button class="emoji-category" data-category="activities">⚽</button>
            <button class="emoji-category" data-category="travel">🚗</button>
            <button class="emoji-category" data-category="objects">💡</button>
            <button class="emoji-category" data-category="symbols">❤️</button>
        </div>
        <div class="emoji-grid" id="emoji-grid"></div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settings-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ustawienia</h3>
                <button class="modal-close" id="settings-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="settings-content">
                <!-- Zawartość ustawień będzie ładowana dynamicznie -->
            </div>
        </div>
    </div>

    <!-- Admin Panel Modal -->
    <div class="modal" id="admin-modal" style="display: none;">
        <div class="modal-content admin-panel">
            <div class="modal-header">
                <h3>Panel Administracyjny</h3>
                <button class="modal-close" id="admin-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="admin-content">
                <!-- Zawartość panelu admin będzie ładowana dynamicznie -->
            </div>
        </div>
    </div>

        </main>
        </div> <!-- End content-wrapper -->
    </div>

    <!-- JavaScript -->
    <script src="js/config.js"></script>
<script src="js/mentions.js"></script>
<script src="js/emoji-system.js"></script>
<script src="js/file-upload-system.js"></script>
<script src="js/rooms.js"></script>
    <script src="js/ranks.js"></script>
    <script src="js/advanced-features.js"></script>
    <script src="js/admin-panel.js"></script>
    <script src="js/mobile-optimization.js"></script>
    <script src="js/translation.js"></script>
    <script src="js/statistics.js"></script>
    <script src="js/mobile-responsive.js"></script>
    <script src="js/message-archive.js"></script>
    <script src="js/ips-settings.js"></script>
    <script src="js/main.js"></script>
</body>
</html>